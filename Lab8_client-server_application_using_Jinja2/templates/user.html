<!DOCTYPE html> <!-- объявляем тип документа как HTML5 для поддержки всеми современными браузерами -->
<html lang="ru"> <!-- открываем корневой элемент HTML с указанием русского языка содержимого -->
<head> <!-- открываем секцию head для метаданных страницы и определения стилей -->
    <meta charset="UTF-8"> <!-- устанавливаем кодировку UTF-8 для корректного отображения русских символов и специальных знаков валют -->
    <title>{{ myapp.name }} - {{ user.name }}</title> <!-- задаём динамический заголовок вкладки браузера с названием приложения и именем пользователя -->
    <style> /* открываем блок встроенных стилей CSS для оформления элементов страницы */
        /* Блок стилей для всего тела документа */
        body { font-family: Arial, sans-serif; margin: 40px; } /* устанавливаем основной шрифт Arial с универсальным запасным вариантом sans-serif и задаём внешние отступы в 40 пикселей со всех сторон страницы */
        
        /* Блок стилей для блока навигации по приложению */
        .nav { margin: 20px 0; } /* устанавливаем вертикальные отступы в 20 пикселей сверху и снизу */
        
        /* Блок стилей для ссылок внутри навигационного блока */
        .nav a { margin-right: 15px; text-decoration: none; color: #0066cc; } /* добавляем правый отступ в 15 пикселей, убираем стандартное подчёркивание у ссылок и задаём синий цвет текста ссылок */
        
        /* Блок стилей для ссылок при наведении курсора мыши */
        .nav a:hover { text-decoration: underline; } /* добавляем подчёркивание при наведении */
        
        /* Блок стилей для карточки с информацией о пользователе */
        .user-card { 
            background: #f9f9f9; padding: 30px; border-radius: 15px; /* устанавливаем светло-серый цвет фона, добавляем внутренние отступы в 30 пикселей и скругляем углы на 15 пикселей */
            max-width: 800px; margin: 20px 0; /* ограничиваем максимальную ширину карточки 800 пикселями и устанавливаем вертикальные отступы в 20 пикселей сверху и снизу карточки */
        }
        
        /* Блок стилей для контейнера списка валют */
        .currency-list { 
            margin-top: 20px; /* добавляем отступ сверху в 20 пикселей */
            padding: 15px; /* задаём внутренние отступы в 15 пикселей */
            background: white; /* устанавливаем белый цвет фона */
            border-radius: 10px; /* скругляем углы списка на 10 пикселей */
        }

        /* Блок стилей для отдельного элемента валюты в списке */
        .currency-item {
            padding: 10px; /* добавляем внутренние отступы в 10 пикселей */
            border-bottom: 1px solid #eee; /* добавляем светло-серую разделительную линию снизу каждого элемента */
        }

        /* Блок стилей для последнего элемента валюты в списке */
        .currency-item:last-child {
            border-bottom: none; /* убираем разделительную линию у последнего элемента списка */
        }

        /* Блок стилей для блока с ссылкой возврата */
        .back-link { margin-top: 20px; } /* добавляем отступ сверху в 20 пикселей */
    </style> <!-- закрываем блок встроенных стилей -->
</head> <!-- закрываем секцию head -->
<body> <!-- открываем тело документа, где размещается видимое содержимое страницы пользователя -->
    <h1>{{ myapp.name }}</h1> <!-- задаём заголовок первого уровня с динамическим названием приложения -->
    
    <div class="nav"> <!-- открываем блок основной навигации по приложению -->
        <a href="/">Главная</a> <!-- задаём ссылку на главную страницу приложения -->
        <a href="/users">Все пользователи</a> <!-- задаём ссылку на страницу со списком всех пользователей -->
        <a href="/currencies">Курсы валют</a> <!-- задаём ссылку на страницу с актуальными курсами валют -->
        <a href="/author">Об авторе</a> <!-- задаём ссылку на страницу с информацией об авторе приложения -->
    </div> <!-- закрываем блок навигации -->
    
    <div class="user-card"> <!-- открываем карточку с детальной информацией о пользователе -->
        <h2>Профиль пользователя</h2> <!-- задаём заголовок второго уровня, обозначающий раздел профиля -->
        
        <h3>Основная информация:</h3> <!-- задаём заголовок третьего уровня для раздела основной информации -->
        <p><strong>ID:</strong> {{ user.id }}</p> <!-- задаём параграф с идентификатором пользователя -->
        <p><strong>Имя:</strong> {{ user.name }}</p> <!-- задаём параграф с именем пользователя -->
        
        <h3>Подписки на валюты ({{ subscribed_currencies|length }}):</h3> <!-- задаём заголовок третьего уровня с количеством подписок -->
        
        {% if subscribed_currencies %} <!-- проверяем, есть ли у пользователя подписки на валюты -->
            <div class="currency-list"> <!-- открываем контейнер для списка валют -->
                {% for currency in subscribed_currencies %} <!-- открываем цикл Jinja2 для перебора всех подписанных валют -->
                <div class="currency-item"> <!-- открываем элемент списка для одной валюты -->
                    <strong>{{ currency.char_code }}</strong> - {{ currency.name }} <!-- отображаем код и название валюты -->
                    <br> <!-- переносим строки для разделения информации -->
                    <small> <!-- открываем тег для мелкого текста с дополнительной информацией -->
                        Курс: <strong>{{ currency.value }} руб.</strong> <!-- отображаем текущий курс валюты к рублю -->
                        (номинал: {{ currency.nominal }}) <!-- отображаем номинал валюты в скобках -->
                        <br> <!-- переносим строки -->
                    </small> <!-- закрываем тег мелкого текста -->
                </div> <!-- закрываем элемент списка валюты -->
                {% endfor %} <!-- закрываем цикл перебора валют -->
            </div> <!-- закрываем контейнер списка валют -->
        {% else %} <!-- в противном случае -->
            <p>У пользователя нет подписок на валюты.</p> <!-- задаём сообщение об отсутствии подписок -->
        {% endif %} <!-- закрываем блок условного отображения подписок -->
        
        <div class="back-link"> <!-- открываем блок с ссылкой для возврата к списку пользователей -->
            <a href="/users">Вернуться к списку пользователей</a> <!-- задаём ссылку для возврата на страницу со всеми пользователями -->
        </div> <!-- закрываем блок с ссылкой возврата -->
    </div> <!-- закрываем карточку с информацией о пользователе -->
</body> <!-- закрываем тело документа -->
</html> <!-- закрываем корневой элемент HTML -->