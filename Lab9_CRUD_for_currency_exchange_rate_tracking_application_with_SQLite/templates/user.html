<!DOCTYPE html> <!-- объявляем тип документа как HTML5 для совместимости с современными браузерами -->
<html lang="ru"> <!-- открываем корневой элемент HTML с указанием русского языка содержимого -->
<head> <!-- открываем секцию head для метаданных страницы и стилей -->
    <meta charset="UTF-8"> <!-- устанавливаем кодировку UTF-8 для корректного отображения русских символов и специальных знаков -->
    <title>{{ myapp.name }} - {{ user.name }}</title> <!-- задаём динамический заголовок вкладки браузера с названием приложения и именем пользователя -->
    <style> /* открываем блок встроенных стилей CSS для оформления страницы */
        /* Блок стилей для всего тела документа */
        body { 
            font-family: Arial, sans-serif; /* устанавливаем основной шрифт Arial с универсальным запасным вариантом */
            margin: 40px; /* задаём внешние отступы по 40 пикселей со всех сторон страницы */
        }
        /* Блок стилей для блока навигации */
        .nav { 
            margin: 20px 0; /* устанавливаем вертикальные отступы в 20 пикселей сверху и снизу навигационного блока */
        }
        /* Блок стилей для ссылок внутри навигации */
        .nav a { 
            margin-right: 15px; /* добавляем правый отступ в 15 пикселей для создания промежутков между ссылками */
            text-decoration: none; /* убираем стандартное подчёркивание у ссылок для чистого вида */
            color: #0066cc; /* задаём синий цвет текста ссылок */
        }
        /* Блок стилей для ссылок при наведении курсора мыши */
        .nav a:hover { 
            text-decoration: underline; /* добавляем подчёркивание при наведении для визуальной обратной связи */
        }
        /* Блок стилей для карточки с информацией о пользователе */
        .user-card { 
            background: #f9f9f9; /* устанавливаем светло-серый фон для карточки пользователя */
            padding: 30px; /* задаём внутренние отступы в 30 пикселей для содержимого карточки */
            border-radius: 15px; /* скругляем углы карточки на 15 пикселей для более мягкого вида */
            max-width: 800px; /* ограничиваем максимальную ширину карточки 800 пикселями */
            margin: 20px 0; /* добавляем вертикальные отступы в 20 пикселей сверху и снизу карточки */
        }
        /* Блок стилей для контейнера списка валют */
        .currency-list { 
            margin-top: 20px; /* добавляем отступ сверху в 20 пикселей для отделения от других элементов */
            padding: 15px; /* задаём внутренние отступы в 15 пикселей для содержимого контейнера */
            background: white; /* устанавливаем белый фон для контейнера списка */
            border-radius: 10px; /* скругляем углы контейнера на 10 пикселей */
        }
        /* Блок стилей для отдельного элемента валюты в списке */
        .currency-item { 
            padding: 10px; /* задаём внутренние отступы в 10 пикселей для элемента валюты */
            border-bottom: 1px solid #eee; /* добавляем нижнюю границу толщиной 1 пиксель светло-серого цвета */
            margin-bottom: 10px; /* добавляем нижний отступ в 10 пикселей между элементами валют */
        }
        /* Блок стилей для последнего элемента валюты в списке */
        .currency-item:last-child { 
            border-bottom: none; /* убираем нижнюю границу у последнего элемента */
            margin-bottom: 0; /* убираем нижний отступ у последнего элемента */
        }
        /* Блок стилей для блока с ссылкой возврата */
        .back-link { 
            margin-top: 20px; /* добавляем отступ сверху в 20 пикселей для ссылки возврата */
        }
        /* Блок стилей для таблицы с курсами валют пользователя */
        .currency-table { 
            width: 100%; /* растягиваем таблицу на всю доступную ширину контейнера */
            border-collapse: collapse; /* объединяем границы соседних ячеек таблицы в единую линию */
            margin: 15px 0; /* добавляем вертикальные отступы в 15 пикселей сверху и снизу таблицы */
        }
        /* Блок общих стилей для заголовочных и обычных ячеек таблицы */
        .currency-table th,
        .currency-table td { 
            border: 1px solid #ddd; /* добавляем светло-серую рамку толщиной 1 пиксель вокруг каждой ячейки */
            padding: 10px; /* задаём внутренние отступы в 10 пикселей для содержимого ячеек */
            text-align: left; /* выравниваем текст в ячейках по левому краю */
        }
        /* Блок специфических стилей для заголовочных ячеек таблица */
        .currency-table th { 
            background-color: #f2f2f2; /* устанавливаем светло-серый фон для заголовков столбцов */
        }
        /* Блок стилей для сообщения об отсутствии подписок */
        .no-subscriptions { 
            background: #fff3cd; /* устанавливаем светло-жёлтый фон для сообщения об отсутствии подписок */
            border: 1px solid #ffeaa7; /* добавляем жёлтую рамку толщиной 1 пиксель */
            color: #856404; /* устанавливаем тёмно-жёлтый цвет текста для сообщения */
            padding: 15px; /* задаём внутренние отступы в 15 пикселей для содержимого блока */
            border-radius: 5px; /* скругляем углы блока на 5 пикселей */
            margin: 15px 0; /* добавляем вертикальные отступы в 15 пикселей сверху и снизу блока */
        }
    </style> <!-- закрываем блок встроенных стилей -->
</head> <!-- закрываем секцию head -->
<body> <!-- открываем тело документа, где размещается видимое содержимое страницы -->
    <h1>{{ myapp.name }}</h1> <!-- задаём заголовок первого уровня с динамическим названием приложения -->
    
    <div class="nav"> <!-- открываем блок навигации по сайту -->
        <a href="/">Главная</a> <!-- задаём ссылку для перехода на главную страницу приложения -->
        <a href="/users">Все пользователи</a> <!-- задаём ссылку для перехода на страницу со всеми пользователями -->
        <a href="/currencies">Курсы валют</a> <!-- задаём ссылку для перехода на страницу курсов валют -->
        <a href="/author">Об авторе</a> <!-- задаём ссылку для перехода на страницу с информацией об авторе -->
    </div> <!-- закрываем блок навигации -->
    
    <div class="user-card"> <!-- открываем карточку с детальной информацией о пользователе -->
        <h2>Профиль пользователя</h2> <!-- задаём заголовок второго уровня, обозначающий раздел профиля -->
        
        <h3>Основная информация:</h3> <!-- задаём заголовок третьего уровня для раздела основной информации -->
        <p><strong>ID:</strong> {{ user.id }}</p> <!-- задаём параграф с идентификатором пользователя -->
        <p><strong>Имя:</strong> {{ user.name }}</p> <!-- задаём параграф с именем пользователя -->
        
        <h3>Подписки на валюты ({{ subscribed_currencies|length }}):</h3> <!-- задаём заголовок третьего уровня с количеством подписок -->
        
        {% if subscribed_currencies %} <!-- проверяем, есть ли у пользователя подписки на валюты -->
        <div class="currency-list"> <!-- открываем контейнер для списка валют -->
            <table class="currency-table"> <!-- открываем таблицу для отображения валют -->
                <thead> <!-- открываем секцию заголовка таблицы -->
                    <tr> <!-- открываем строку заголовков столбцов -->
                        <th>Код</th> <!-- задаём заголовок столбца с символьным кодом валюты -->
                        <th>Цифровой код</th> <!-- задаём заголовок столбца с цифровым кодом валюты -->
                        <th>Название</th> <!-- задаём заголовок столбца с названием валюты -->
                        <th>Курс к рублю</th> <!-- задаём заголовок столбца с курсом валюты к российскому рублю -->
                        <th>Номинал</th> <!-- задаём заголовок столбца с номиналом валюты -->
                        <th>Курс за единицу</th> <!-- задаём заголовок столбца с курсом за одну единицу валюты -->
                    </tr> <!-- закрываем строку заголовков -->
                </thead> <!-- закрываем секцию заголовка таблицы -->
                <tbody> <!-- открываем секцию тела таблицы с данными -->
                    {% for currency in subscribed_currencies %} <!-- открываем цикл Jinja2 для перебора всех подписанных валют -->
                    <tr> <!-- открываем строку таблицы для одной валюты -->
                        <td><strong>{{ currency.char_code }}</strong></td> <!-- задаём ячейку с символьным кодом валюты -->
                        <td>{{ currency.num_code }}</td> <!-- задаём ячейку с цифровым кодом валюты -->
                        <td>{{ currency.name }}</td> <!-- задаём ячейку с названием валюты -->
                        <td>{{ "%.4f"|format(currency.value) }} руб.</td> <!-- задаём ячейку с курсом валюты к рублю -->
                        <td>{{ currency.nominal }}</td> <!-- задаём ячейку с номиналом валюты -->
                        <td>{{ "%.4f"|format(currency.value / currency.nominal) }} руб.</td> <!-- задаём ячейку с курсом за одну единицу валюты -->
                    </tr> <!-- закрываем строку таблицы для текущей валюты -->
                    {% endfor %} <!-- закрываем цикл перебора валют -->
                </tbody> <!-- закрываем секцию тела таблицы -->
            </table> <!-- закрываем таблицу -->
        </div> <!-- закрываем контейнер списка валют -->
        {% else %} <!-- если у пользователя нет подписок -->
        <div class="no-subscriptions"> <!-- открываем блок сообщения об отсутствии подписок -->
            <p>У пользователя нет подписок на валюты.</p> <!-- задаём сообщение об отсутствии подписок -->
        </div> <!-- закрываем блок сообщения -->
        {% endif %} <!-- закрываем блок условного отображения подписок -->
        
        <div class="back-link"> <!-- открываем блок с ссылкой для возврата к списку пользователей -->
            <a href="/users">Вернуться к списку пользователей</a> <!-- задаём ссылку для возврата на страницу со всеми пользователями -->
        </div> <!-- закрываем блок с ссылкой возврата -->
    </div> <!-- закрываем карточку с информацией о пользователе -->
</body> <!-- закрываем тело документа -->
</html> <!-- закрываем корневой элемент HTML -->