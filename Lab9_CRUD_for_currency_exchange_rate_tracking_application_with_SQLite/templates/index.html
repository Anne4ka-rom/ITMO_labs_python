<!DOCTYPE html> <!-- объявляем тип документа как HTML5 для совместимости с современными браузерами -->
<html lang="ru"> <!-- открываем корневой элемент HTML с указанием русского языка содержимого -->
<head> <!-- открываем секцию head для метаданных страницы и стилей -->
    <meta charset="UTF-8"> <!-- устанавливаем кодировку UTF-8 для корректного отображения русских символов и специальных знаков -->
    <title>{{ myapp.name }} - Главная</title> <!-- задаём динамический заголовок вкладки браузера с названием приложения и страницы -->
    <style> /* открываем блок встроенных стилей CSS для оформления страницы */
        /* Блок стилей для всего тела документа */
        body { 
            font-family: Arial, sans-serif; /* устанавливаем основной шрифт Arial с универсальным запасным вариантом */
            margin: 40px; /* задаём внешние отступы по 40 пикселей со всех сторон страницы */
        }
        /* Блок стилей для блока статистики приложения */
        .stats { 
            background: #f5f5f5; /* устанавливаем светло-серый фон для блока статистики */
            padding: 20px; /* задаём внутренние отступы в 20 пикселей для содержимого блока */
            border-radius: 10px; /* скругляем углы блока на 10 пикселей */
            margin: 20px 0; /* добавляем вертикальные отступы в 20 пикселей сверху и снизу блока */
        }
        /* Блок стилей для блока навигации */
        .nav { 
            margin: 20px 0; /* устанавливаем вертикальные отступы в 20 пикселей сверху и снизу навигационного блока */
        }
        /* Блок стилей для ссылок внутри навигации */
        .nav a { 
            margin-right: 15px; /* добавляем правый отступ в 15 пикселей для создания промежутков между ссылками */
            text-decoration: none; /* убираем стандартное подчёркивание у ссылок */
            color: #0066cc; /* задаём синий цвет текста ссылок */
        }
        /* Блок стилей для ссылок при наведении курсора мыши */
        .nav a:hover { 
            text-decoration: underline; /* добавляем подчёркивание при наведении */
        }
        /* Блок стилей для таблицы с валютными курсами */
        table { 
            border-collapse: collapse; /* объединяем границы соседних ячеек таблицы в единую линию */
            width: 100%; /* растягиваем таблицу на всю доступную ширину контейнера */
            margin: 20px 0; /* добавляем вертикальные отступы в 20 пикселей сверху и снизу таблицы */
        }
        /* Блок общих стилей для заголовочных и обычных ячеек таблицы */
        th, td { 
            border: 1px solid #ddd; /* добавляем светло-серую рамку толщиной 1 пиксель вокруг каждой ячейки */
            padding: 12px; /* задаём внутренние отступы в 12 пикселей для содержимого ячеек */
            text-align: left; /* выравниваем текст в ячейках по левому краю */
        }
        /* Блок специфических стилей для заголовочных ячеек таблица */
        th { 
            background-color: #f2f2f2; /* устанавливаем светло-серый фон для заголовков столбцов */
        }
        /* Блок стилей для строк таблицы при наведении курсора мыши */
        tr:hover { 
            background-color: #f5f5f5; /* устанавливаем светло-серый фон для строки при наведении курсора */
        }
        /* Блок стилей для сообщений */
        .message { 
            padding: 10px; /* задаём внутренние отступы в 10 пикселей для сообщений */
            margin: 10px 0; /* добавляем вертикальные отступы в 10 пикселей сверху и снизу сообщений */
            border-radius: 5px; /* скругляем углы сообщений на 5 пикселей */
        }
        /* Блок стилей для сообщений об успехе */
        .success { 
            background-color: #dff0d8; /* устанавливаем светло-зелёный фон для успешных сообщений */
            color: #3c763d; /* задаём тёмно-зелёный цвет текста для успешных сообщений */
            border: 1px solid #d6e9c6; /* добавляем светло-зелёную рамку толщиной 1 пиксель */
        }
        /* Блок стилей для информационных сообщений */
        .info { 
            background-color: #d9edf7; /* устанавливаем светло-голубой фон для информационных сообщений */
            color: #31708f; /* задаём тёмно-синий цвет текста для информационных сообщений */
            border: 1px solid #bce8f1; /* добавляем голубую рамку толщиной 1 пиксель */
        }
    </style> <!-- закрываем блок встроенных стилей -->
</head> <!-- закрываем секцию head -->
<body> <!-- открываем тело документа, где размещается видимое содержимое страницы -->
    <h1>{{ myapp.name }} v{{ myapp.version }}</h1> <!-- задаём заголовок первого уровня с названием и версией приложения -->
    
    <p>Добро пожаловать в веб-приложение для отслеживания курсов валют!</p> <!-- задаём параграф с описанием назначения приложения -->
    
    <div class="nav"> <!-- открываем блок навигации по сайту -->
        <a href="/">Главная</a> <!-- задаём ссылку на текущую страницу -->
        <a href="/users">Пользователи</a> <!-- задаём ссылку для перехода на страницу управления пользователями -->
        <a href="/currencies">Курсы валют</a> <!-- задаём ссылку для перехода на страницу курсов валют -->
        <a href="/author">Об авторе</a> <!-- задаём ссылку для перехода на страницу с информацией об авторе -->
    </div> <!-- закрываем блок навигации -->
    
    <div class="stats"> <!-- открываем блок с общей статистикой приложения -->
        <h2>Статистика приложения:</h2> <!-- задаём заголовок второго уровня для раздела статистики -->
        <ul> <!-- открываем маркированный список для отображения статистических данных -->
            <li><strong>Пользователей:</strong> {{ stats.total_users }}</li> <!-- задаём элемент списка с количеством пользователей -->
            <li><strong>Валют в системе:</strong> {{ stats.total_currencies }}</li> <!-- задаём элемент списка с количеством валют в системе -->
        </ul> <!-- закрываем маркированный список -->
    </div> <!-- закрываем блок статистики -->
    
    <h2>Последние курсы валют:</h2> <!-- задаём заголовок второго уровня для раздела с курсами валют -->
    
    {% if currencies %} <!-- проверяем, есть ли данные о валютах -->
    <table> <!-- открываем таблицу для отображения курсов валют -->
        <thead> <!-- открываем секцию заголовка таблицы -->
            <tr> <!-- открываем строку заголовков столбцов -->
                <th>Код</th> <!-- задаём заголовок столбца с символьным кодом валюты -->
                <th>Название</th> <!-- задаём заголовок столбца с названием валюты -->
                <th>Курс к рублю</th> <!-- задаём заголовок столбца с курсом валюты к российскому рублю -->
                <th>Номинал</th> <!-- задаём заголовок столбца с номиналом валюты -->
                <th>Курс за единицу</th> <!-- задаём заголовок столбца с курсом за одну единицу валюты -->
            </tr> <!-- закрываем строку заголовков -->
        </thead> <!-- закрываем секцию заголовка таблицы -->
        <tbody> <!-- открываем секцию тела таблицы с данными -->
            {% for currency in currencies %} <!-- открываем цикл Jinja2 для перебора всех валют -->
            <tr> <!-- открываем строку таблицы для одной валюты -->
                <td>{{ currency.char_code }}</td> <!-- задаём ячейку с символьным кодом валюты -->
                <td>{{ currency.name }}</td> <!-- задаём ячейку с названием валюты -->
                <td>{{ "%.4f"|format(currency.value) }} руб.</td> <!-- задаём ячейку с курсом валюты к рублю с указанием единицы измерения -->
                <td>{{ currency.nominal }}</td> <!-- задаём ячейку с номиналом валюты -->
                <td>{{ "%.4f"|format(currency.value / currency.nominal) }} руб.</td> <!-- задаём ячейку с курсом за одну единицу валюты -->
            </tr> <!-- закрываем строку таблицы для текущей валюты -->
            {% endfor %} <!-- закрываем цикл перебора валют -->
        </tbody> <!-- закрываем секцию тела таблицы -->
    </table> <!-- закрываем таблицу -->
    {% else %} <!-- если данных о валютах нет -->
    <div class="message info"> <!-- открываем информационное сообщение -->
        <p>Курсы валют временно недоступны. Пожалуйста, попробуйте позже.</p> <!-- задаём параграф с сообщением об отсутствии данных -->
    </div> <!-- закрываем информационное сообщение -->
    {% endif %} <!-- закрываем блок условного отображения -->
    
    <h2>Быстрые ссылки:</h2> <!-- задаём заголовок второго уровня для раздела быстрого доступа -->
    <ul> <!-- открываем маркированный список для быстрых ссылок на основные разделы -->
        <li><a href="/users">Посмотреть всех пользователей</a></li> <!-- задаём элемент списка со ссылкой на страницу пользователей -->
        <li><a href="/currencies">Текущие курсы валют</a></li> <!-- задаём элемент списка со ссылкой на страницу курсов валют -->
        <li><a href="/author">Информация об авторе</a></li> <!-- задаём элемент списка со ссылкой на страницу об авторе -->
    </ul> <!-- закрываем маркированный список быстрых ссылок -->
    
    <footer> <!-- открываем подвал страницы с информацией об авторе -->
        <p>Автор: {{ author.name }} ({{ author.group }})</p> <!-- задаём параграф с информацией об авторе приложения -->
    </footer> <!-- закрываем подвал страницы -->
</body> <!-- закрываем тело документа -->
</html> <!-- закрываем корневой элемент HTML -->